<?xml version="1.0"?>
<odoo>

    <record model="ir.ui.view" id="acs_card_list">
      <field name="name">卡片設定</field>
      <field name="model">acs.card</field>
      <field name="arch" type="xml">
        <tree>
            <field name="user_role"/>
            <field name="user_code"/>
            <field name="user_name"/>
            <field name="user_phone"/>
            <field name="uid"/>
            <field name="pin"/>
            <button name="action_uid_change" string="更換卡片"/>
            <button name="action_dispose" string="作廢"/>
        </tree>
      </field>
    </record>

    <record model="ir.ui.view" id="acs_card_form">
        <field name="name">卡片設定</field>
        <field name="model">acs.card</field>
        <field name="arch" type="xml">
            <form string="卡片設定" duplicate="0">
            <header>
                <!-- Buttons go here-->
            </header>
            <sheet>
                <group>
                <field name="person_ref" options="{'no_create': True, 'no_create_edit': True}"/>

                <field name="user_code" />
                <field name="user_name" />
                <field name="user_phone"/>
                <field name="uid"/>
                <field name="pin" readonly="1"/>
                <button name="action_dispose" string="重置密碼"/>
                <field name="partner_id" invisible="0"/>
                </group>
                <notebook>
                <page string="合約列表">
                    <field name="contract_ids" widget="section_and_note_one2many" mode="tree" >
                            <form>
                                <group>
                                    <group>
                                        <field name="locker_id" domain="[('status', '=', '閒置')]" 
                                        options="{'no_create': True, 'no_create_edit': True}"
                                        context="{'partner_id':self.partner_id}" />
                                        <field name="code" />
                                    </group>
                                </group>
                            </form>
                            <tree string="合約清單" editable="bottom">
                                <control>
                                    <create name="add_contract_control" string="Add a contract"/>
                                </control>
                                <field name="locker_id" domain="[('status', '=', '閒置')]" 
                                    options="{'no_create': True, 'no_create_edit': True}"
                                    context="{'partner_id':self.partner_id}" />
                                <field name="code"/>
                                <field name="status"/>
                            </tree>
                    </field>
                </page>
                <page string="授權群組列表">
                    <field name="devicegroup_ids">
                    </field>
                </page>
                </notebook>
            </sheet>
            </form>
        </field>
    </record>
</odoo>
